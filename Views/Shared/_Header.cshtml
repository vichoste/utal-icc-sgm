@using Microsoft.AspNetCore.Identity
@using Utal.Icc.Sgm.Areas.Account.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<div id="header" class="app-header">
	<div class="mobile-toggler">
		<button type="button" class="menu-toggler" data-toggle="sidebar-mobile">
			<span class="bar"></span>
			<span class="bar"></span>
		</button>
	</div>
	<div class="brand">
		<div class="desktop-toggler">
			<button type="button" class="menu-toggler" data-toggle="sidebar-minify">
				<span class="bar"></span>
				<span class="bar"></span>
			</button>
		</div>
		<a href="/" class="brand-logo">
			<img src="~/img/logo.png" alt="" height="20" />
		</a>
	</div>
	<div class="menu d-flex justify-content-end">
		<div class="menu-item dropdown">
			<a href="#" data-bs-toggle="dropdown" data-bs-display="static" class="menu-link">
				@if (SignInManager.IsSignedIn(User)) {
					<div class="menu-img">
						<i class="fa-solid fa-user"></i>
					</div>
					<div class="menu-text">@User.Identity?.Name</div>
				} else {
					<div class="menu-img">
						<i class="fa-solid fa-user"></i>
					</div>
					<div class="menu-text">Ingresar</div>
				}
			</a>
			<div class="dropdown-menu dropdown-menu-end me-lg-3">
				@if (SignInManager.IsSignedIn(User)) {
					<a class="dropdown-item d-flex align-items-center" asp-area="Account" asp-page="Profile">Mi cuenta <i class="fa fa-user-circle fa-fw ms-auto text-gray-400 f-s-16"></i></a>
					<div class="dropdown-divider"></div>
					<form asp-area="Account" asp-controller="SignOut" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
						<button type="submit" class="dropdown-item d-flex align-items-center">Cerrar sesión <i class="fa fa-toggle-off fa-fw ms-auto text-gray-400 f-s-16"></i></button>
					</form>
				} else {
					<a class="dropdown-item d-flex align-items-center" asp-area="Account" asp-controller="SignUp">Registrarse <i class="fa fa-user-plus fa-fw ms-auto text-gray-400 f-s-16"></i></a>
					<a class="dropdown-item d-flex align-items-center" asp-area="Account" asp-controller="SignIn">Iniciar sesión <i class="fa fa-arrow-right-to-bracket fa-fw ms-auto text-gray-400 f-s-16"></i></a>
				}
			</div>
		</div>
	</div>
</div>